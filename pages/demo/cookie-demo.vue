<script setup lang="ts">
// CookieDemo è«‹å¡«å¯«åŠŸèƒ½æè¿°ğŸ‘ˆ
const counter = useCookie<number>('counter');
const inputCookie = useCookie<string>('inputCookie', {
  maxAge: 10
});
/**
  * useCookie(name, options)
  * option: {
    maxAge: æŒ‡å®š Max-Age å±¬æ€§çš„å€¼ï¼Œå–®ä½æ˜¯ç§’ã€‚å¦‚æœæ²’æœ‰è¨­ç½®ï¼Œå‰‡é€™å€‹ cookie å°‡æœƒæ˜¯ Session Onlyï¼Œæ„å³ç¶²é é—œé–‰å¾Œå°±æœƒæ¶ˆå¤±ã€‚
    expires: æŒ‡å®šä¸€å€‹ Date ç‰©ä»¶ä¾†ä½œç‚ºéæœŸçš„æ™‚é–“ï¼Œé€šå¸¸æ˜¯è¦ç›¸å®¹æ¯”è¼ƒèˆŠçš„ç€è¦½å™¨åšä½¿ç”¨ï¼Œå¦‚æœ maxAge èˆ‡ expires å±¬æ€§éƒ½æœ‰è¨­å®šï¼Œå‰‡éæœŸæ™‚é–“æ‡‰è©²è¦è¨­å®šç‚ºä¸€æ¨£ã€‚
    httpOnly: æ˜¯ä¸€å€‹å¸ƒæ—å€¼ï¼Œé è¨­ç‚º falseï¼Œç•¶è¨­ç½®ç‚º true æ™‚ï¼Œè¡¨ç¤ºå®¢æˆ¶ç«¯çš„ JavaScript å°‡ç„¡æ³•ä½¿ç”¨ document.cookie ä¾†æŸ¥çœ‹é€™å€‹ cookieã€‚é€šå¸¸æ˜¯æ¯”è¼ƒæ•æ„Ÿæˆ–æ©Ÿå¯†çš„è¨Šæ¯ï¼Œå¦‚ Token æˆ– Session Id æœƒè¨­å®šç‚º trueï¼Œåªè®“ç€è¦½å™¨ç™¼å‡ºè«‹æ±‚æ™‚è‡ªå‹•å¤¾å¸¶ã€‚
    secure: æ˜¯ä¸€å€‹å¸ƒæ—å€¼ï¼Œé è¨­ç‚º falseï¼Œç•¶è¨­ç½®ç‚º true æ™‚ç€è¦½å™¨å¾—æ˜¯ HTTPS çš„åŠ å¯†å‚³è¼¸å”å®šçš„æƒ…å¢ƒä¸‹ï¼Œæ‰æœƒè‡ªå‹•å¤¾å¸¶é€™å€‹ cookieã€‚
    domain: æŒ‡å®š cookie å¯ä»¥é©ç”¨çš„ Domainï¼Œé€šå¸¸æœƒä¿æŒé è¨­ï¼Œè¡¨æ˜¯é©ç”¨æ–¼è‡ªå·±çš„ Domain ä¹‹ä¸‹ã€‚
    path: æŒ‡å®š cookie é©ç”¨çš„è·¯å¾‘ã€‚
    sameSite: ç‚ºä¸€å€‹å¸ƒæ—å€¼æˆ–æ˜¯å­—ä¸²ï¼Œç”¨æ–¼è¨­å®šå®‰å…¨ç­–ç•¥ã€‚
    encode: ç”±æ–¼ cookie çš„å€¼åªèƒ½ä½¿ç”¨æœ‰é™çš„å­—å…ƒé›†ï¼Œæ‰€ä»¥é€™å€‹è¨­ç½®å¯ä»¥å°‡ cookie ç·¨ç¢¼æˆåˆæ³•çš„å­—ä¸²å€¼ï¼Œé è¨­çš„ç·¨ç¢¼æ˜¯ä½¿ç”¨ JSON.stringify + encodeURIComponent()ã€‚
    decode: cookie æœƒç¶“éä¸€å€‹è§£ç¢¼çš„éç¨‹ï¼Œé è¨­çš„è§£ç¢¼æ˜¯ä½¿ç”¨ decodeURIComponent + destrã€‚
    default: ç‚ºä¸€å€‹å‡½æ•¸ï¼Œå¯ä»¥ç”¨æ–¼å›å‚³ cookie çš„é è¨­å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å›å‚³ä¸€å€‹ Refã€‚
  }
*/

const inputVal = ref('');
counter.value = counter.value || Math.round(Math.random() * 1000);

const SetCookie = () => {
  inputCookie.value = inputVal.value;
};
</script>

<template lang="pug">
#CookieDemo
  h1 Counter: {{ counter || '-' }}
  ElButton(@click="counter = null") reset
  ElButton(@click="counter--") -
  ElButton(@click="counter++") +
  .row-item
    ElInput(v-model="inputVal" class="!w-[100px]")
    ElButton(@click="SetCookie") Set 10s Cookie
    p {{ inputCookie }}
</template>

<style lang="scss" scoped>
.row-item {
  display: flex;
  align-items: center;
  gap: 10px;
}

// ä½ˆå±€ ----
// #CookieDemo {
// }

// çµ„ä»¶ ----
</style>
